<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Процент взаимоставки</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">OFBet Bot</h1>
        <table class="table">
            <thead>
                <tr>
                    <th>Событие</th>
                    <th>Сайт</th>
                    <th>Тип ставки</th>
                    <th>Коэффициент</th>
                    <th>Ссылка</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        // JavaScript для копирования названия матча
        const copyButtons = document.querySelectorAll('.copy-button');
        copyButtons.forEach(button => {
            button.addEventListener('click', () => {
                const matchName = button.getAttribute('data-copy');
                copyToClipboard(matchName);
            });
        });

        function copyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        const socket = io.connect(window.location.origin);
    
        socket.on('connect', function () {
            console.log('Connected to the server.');
        });
    
        socket.on('update_event', function (newEvent) {
            // Handle the new event data and update the page as needed
            // For example, you can append the new event to the table.
            
            const tableBody = document.querySelector('tbody');
            
            // First match row
            const match1Row = document.createElement('tr');
            const match1Data = [
                newEvent.matchName1,
                newEvent.site1,
                newEvent.type1,
                newEvent.coefficient1,
                `<a href="${newEvent.link1}" target="_blank">${newEvent.link1}</a>`
            ];
            
            match1Data.forEach((data, index) => {
                const cell = document.createElement(index === 0 ? 'th' : 'td');
                if (index === 0) {
                    const link = document.createElement('a');
                    link.textContent = data;
                    link.href = '#';  // Set an empty href, we'll handle the click event.
                    link.addEventListener('click', () => copyToClipboard(data));
                    cell.appendChild(link);
                } else {
                    cell.innerHTML = data;
                }
                match1Row.appendChild(cell);
            });
            
            tableBody.appendChild(match1Row);
            
            // Second match row
            const match2Row = document.createElement('tr');
            const match2Data = [
                newEvent.matchName2,
                newEvent.site2,
                newEvent.type2,
                newEvent.coefficient2,
                `<a href="${newEvent.link2}" target="_blank">${newEvent.link2}</a>`
            ];
            
            match2Data.forEach((data, index) => {
                const cell = document.createElement(index === 0 ? 'th' : 'td');
                if (index === 0) {
                    const link = document.createElement('a');
                    link.textContent = data;
                    link.href = '#';  // Set an empty href, we'll handle the click event.
                    link.addEventListener('click', () => copyToClipboard(data));
                    cell.appendChild(link);
                } else {
                    cell.innerHTML = data;
                }
                match2Row.appendChild(cell);
            });
            
            tableBody.appendChild(match2Row);
            
            // Profit row
            const profitRow = document.createElement('tr');
            const profitCell = document.createElement('td');
            profitCell.colSpan = 6;
            profitCell.textContent = 'Profit: ' + newEvent.profit + '%';
            profitRow.appendChild(profitCell);
            
            tableBody.appendChild(profitRow);
            
            // Event separator row
            const separatorRow = document.createElement('tr');
            const separatorCell = document.createElement('td');
            separatorCell.colSpan = 6;
            separatorRow.appendChild(separatorCell);
            
            tableBody.appendChild(separatorRow);
        });
        
        document.getElementById('clear-table-button').addEventListener('click', function () {
            socket.emit('clear_table');
        });
        
        function copyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
        }
    </script>
    </body>
    </html>
    
    </body>
    </html>
    
</body>
</html>
